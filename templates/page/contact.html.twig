{% extends 'base.html.twig' %}

{% block title %}Contactez-nous - La Coopé des Vignerons | Assistance et Conseils
{% endblock %}

{% block meta_description %}Une question sur nos vins ou sur votre commande ? Contactez notre équipe d'experts vignerons par formulaire, email ou téléphone.
{% endblock %}

{% block body %}
	<div class="py-5">
		<section class="text-center mb-5">
			<h1 class="display-3 fw-bold text-primary mb-3">Contactez-nous</h1>
			<p class="lead text-muted mx-auto" style="max-width: 700px;">
				Une question sur une cuvée ? Besoin d'un conseil pour un accord mets et vins ? Nos experts sont à votre écoute.
			</p>
		</section>

		<div
			class="row g-5">
			<!-- Colonne de Gauche : Formulaires -->
			<div class="col-lg-8">
				<div class="row g-4 mb-5">
					<div class="col-12">
						<div class="card border-0 shadow-sm rounded-4 overflow-hidden h-100">
							<div class="card-header bg-primary text-white py-3">
								<h2 class="h5 fw-bold mb-0">
									<i class="fas fa-paper-plane me-2" aria-hidden="true"></i>Envoyez-nous un message</h2>
							</div>
							<div class="card-body p-4 p-md-5 bg-light">
								{{ form_start(contactForm) }}
								<div class="mb-3">
									{{ form_label(contactForm.name, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
									{{ form_widget(contactForm.name, {'attr': {'class': 'form-control form-control-lg'}}) }}
									{{ form_errors(contactForm.name) }}
								</div>
								<div class="mb-3">
									{{ form_label(contactForm.email, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
									{{ form_widget(contactForm.email, {'attr': {'class': 'form-control form-control-lg'}}) }}
									{{ form_errors(contactForm.email) }}
								</div>
								<div class="mb-3">
									{{ form_label(contactForm.subject, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
									{{ form_widget(contactForm.subject, {'attr': {'class': 'form-control form-control-lg'}}) }}
									{{ form_errors(contactForm.subject) }}
								</div>
								<div class="mb-4">
									{{ form_label(contactForm.message, null, {'label_attr': {'class': 'form-label fw-bold'}}) }}
									{{ form_widget(contactForm.message, {'attr': {'class': 'form-control form-control-lg', 'style': 'min-height: 150px;'}}) }}
									{{ form_errors(contactForm.message) }}
								</div>
								<button type="submit" class="btn btn-primary btn-lg rounded-pill px-5 fw-bold shadow-sm hover-lift">
									Envoyer le message
									<i class="fas fa-arrow-right ms-2"></i>
								</button>
								{{ form_end(contactForm) }}
							</div>
						</div>
					</div>

					<div class="col-12" id="testimonial-section">
						<div class="card border-0 shadow-sm rounded-4 bg-light border-top border-4 border-warning">
							<div class="card-body p-4 p-md-5">
								<h2 class="h4 fw-bold text-dark mb-3">Laissez un témoignage</h2>
								<p class="text-muted mb-4 small">Votre avis est précieux pour nous et pour les autres membres de la communauté.</p>

								{{ form_start(testimonialForm) }}
								<div class="row g-3 mb-3">
									<div class="col-md-6">
										{{ form_label(testimonialForm.name, null, {'label_attr': {'class': 'form-label fw-sm fw-bold'}}) }}
										{{ form_widget(testimonialForm.name, {'attr': {'class': 'form-control'}}) }}
									</div>
									<div class="col-md-6">
										{{ form_label(testimonialForm.email, null, {'label_attr': {'class': 'form-label fw-sm fw-bold'}}) }}
										{{ form_widget(testimonialForm.email, {'attr': {'class': 'form-control'}}) }}
									</div>
								</div>

								<div class="mb-4" data-controller="rating">
									<label class="form-label fw-bold d-block mb-2">Votre note</label>
									<div class="d-flex gap-2 fs-3 text-warning cursor-pointer">
										{% for i in 1..5 %}
											<span class="star-rating" data-value="{{ i }}" data-rating-target="star" data-action="click->rating#select mouseover->rating#hover mouseout->rating#reset">★</span>
										{% endfor %}
									</div>
									{{ form_widget(testimonialForm.rating) }}
								</div>

								<div class="mb-4">
									{{ form_label(testimonialForm.content, 'Votre message', {'label_attr': {'class': 'form-label fw-bold'}}) }}
									{{ form_widget(testimonialForm.content, {'attr': {'class': 'form-control', 'rows': 4}}) }}
								</div>

								<button type="submit" class="btn btn-outline-dark rounded-pill px-4 fw-bold">Publier l'avis</button>
								{{ form_end(testimonialForm) }}
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Colonne de Droite : Coordonnées -->
			<div class="col-lg-4">
				<div class="sticky-top" style="top: 2rem;">
					<div class="card border-0 shadow-sm rounded-4 mb-4">
						<div class="card-body p-4">
							<h3 class="h5 fw-bold mb-4">Nos coordonnées</h3>

							<div class="d-flex align-items-center mb-4">
								<div class="flex-shrink-0 bg-primary-subtle rounded-circle d-flex align-items-center justify-content-center text-primary" style="width: 48px; height: 48px;">
									<i class="fas fa-map-marker-alt" aria-hidden="true"></i>
								</div>
								<div class="ms-3">
									<h4 class="h6 fw-bold mb-0">Adresse</h4>
									<p class="text-muted small mb-0">123 Rue du Commerce, 75000 Paris</p>
								</div>
							</div>

							<div class="d-flex align-items-center mb-4">
								<div class="flex-shrink-0 bg-primary-subtle rounded-circle d-flex align-items-center justify-content-center text-primary" style="width: 48px; height: 48px;">
									<i class="fas fa-phone" aria-hidden="true"></i>
								</div>
								<div class="ms-3">
									<h4 class="h6 fw-bold mb-0">Téléphone</h4>
									<p class="mb-0">
										<a href="tel:+33123456789" class="text-decoration-none text-muted small">+33 1 23 45 67 89</a>
									</p>
								</div>
							</div>

							<div class="d-flex align-items-center mb-4">
								<div class="flex-shrink-0 bg-primary-subtle rounded-circle d-flex align-items-center justify-content-center text-primary" style="width: 48px; height: 48px;">
									<i class="fas fa-envelope" aria-hidden="true"></i>
								</div>
								<div class="ms-3">
									<h4 class="h6 fw-bold mb-0">Email</h4>
									<p class="mb-0">
										<a href="mailto:contact@lacoope.com" class="text-decoration-none text-muted small">contact@lacoope.com</a>
									</p>
								</div>
							</div>

							<div class="d-flex align-items-center">
								<div class="flex-shrink-0 bg-primary-subtle rounded-circle d-flex align-items-center justify-content-center text-primary" style="width: 48px; height: 48px;">
									<i class="fas fa-clock" aria-hidden="true"></i>
								</div>
								<div class="ms-3">
									<h4 class="h6 fw-bold mb-0">Horaires</h4>
									<p class="text-muted small mb-0">Lun - Ven : 9h - 18h | Sam : 10h - 17h</p>
								</div>
							</div>
						</div>
					</div>

					<div class="card border-0 shadow rounded-4 bg-primary text-white overflow-hidden" data-controller="chat">
						<div class="card-body p-4 p-md-5 text-center">
							<div class="display-4 mb-3 opacity-50">
								<i class="fas fa-comment-dots"></i>
							</div>
							<h3 class="h4 fw-bold mb-3">Besoin d'un conseil ?</h3>
							<p class="text-white-50 mb-4">Notre sommelier est en ligne pour répondre à vos interrogations en temps réel.</p>
							<button data-action="click->chat#open" class="btn btn-light btn-lg w-100 rounded-pill fw-bold text-primary py-3">
								Démarrer le chat
							</button>

							<!-- Fenêtre de Chat (Bootstrap-ifiée) -->
							<div class="chat-window d-none position-fixed bottom-0 end-0 m-3 shadow-lg rounded-4 bg-white text-dark overflow-hidden" data-chat-target="window" style="width: 350px; z-index: 1060; border: 1px solid rgba(0,0,0,0.1);">
								<div class="bg-primary p-3 d-flex justify-content-between align-items-center text-white">
									<h4 class="h6 fw-bold mb-0">Assistance Sommelier</h4>
									<button type="button" class="btn-close btn-close-white" data-action="click->chat#close"></button>
								</div>
								<div class="p-3 bg-light" style="height: 300px; overflow-y: auto;" data-chat-target="messages">
									<div class="text-muted small text-center mb-3">Bienvenue ! Comment puis-je vous aider ?</div>
								</div>
								<div class="p-3 border-top bg-white">
									<form class="input-group" data-action="submit->chat#send">
										<label for="chat-message-input" class="visually-hidden">Votre message pour le sommelier</label>
										<input type="text" id="chat-message-input" class="form-control" placeholder="Votre message..." data-chat-target="input">
										<button type="submit" class="btn btn-primary" aria-label="Envoyer le message">
											<i class="fas fa-paper-plane" aria-hidden="true"></i>
										</button>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
