<header class="header">
	<div class="header-top bg-primary text-white py-2">
		<div class="container d-flex justify-content-between align-items-center">
			<p class="mb-0 small">Découvrez nos cuvées d'exception - Livraison offerte dès 12 bouteilles</p>
			<div class="header-socials d-flex gap-3">
				<a href="https://facebook.com/lacoope" class="text-white" target="_blank" aria-label="Suivez-nous sur Facebook">
					<i class="fab fa-facebook-f" aria-hidden="true"></i>
				</a>
				<a href="https://instagram.com/lacoope" class="text-white" target="_blank" aria-label="Suivez-nous sur Instagram">
					<i class="fab fa-instagram" aria-hidden="true"></i>
				</a>
				<a href="https://twitter.com/lacoope" class="text-white" target="_blank" aria-label="Suivez-nous sur Twitter">
					<i class="fab fa-x-twitter" aria-hidden="true"></i>
				</a>
			</div>
		</div>
	</div>
	<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm">
		<div
			class="container">
			{# Logo / Brand - Gauche #}
			<a href="{{ path('app_home') }}" class="navbar-brand fw-bold text-primary">
				<i class="fas fa-wine-glass-alt me-2"></i>La Coopé des Vignerons
			</a>

			{# Menu Burger Button - Visible uniquement sur mobile #}
			<button class="navbar-toggler border-0 p-1" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon" style="width: 1.25rem; height: 1.25rem;"></span>
			</button>

			{# Menu de navigation - Centre (desktop) / Dans le collapse (mobile) #}
			<div class="collapse navbar-collapse" id="mainNavbar">
				<ul class="navbar-nav mx-auto mb-2 mb-lg-0">
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_home') }}">Accueil</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_product') }}">Produits</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_about') }}">Domaine</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_contact') }}">Contact</a>
					</li>
					{% if app.user and is_granted('ROLE_ADMIN') %}
						<li class="nav-item d-lg-none">
							<hr class="dropdown-divider my-2">
							<a class="nav-link text-primary fw-bold" href="{{ path('admin') }}">TABLEAU DE BORD ADMIN</a>
						</li>
					{% endif %}
				</ul>
			</div>

			{# Actions utilisateur - Droite #}
			<div
				class="d-flex align-items-center gap-2 gap-lg-3">
				{# Barre de recherche #}
				<div class="position-relative" data-controller="live-search">
					<form class="d-flex" role="search">
						<div class="input-group input-group-sm">
							<input type="text" name="q" class="form-control rounded-start-3" placeholder="Rechercher..." data-live-search-target="input" data-action="input->live-search#onSearch blur->live-search#hideResults" autocomplete="off" style="min-width: 120px; width: 120px;">
							<button class="btn btn-outline-primary rounded-end-3" type="submit" aria-label="Lancer la recherche">
								<i class="fas fa-search" aria-hidden="true"></i>
							</button>
						</div>
					</form>
					<div class="search-results position-absolute w-100 shadow-sm bg-white" data-live-search-target="results" style="z-index: 1050; top: 100%; left: 0; display: none;"></div>
				</div>

				{# Bouton Admin (desktop uniquement) #}
				{% if app.user and is_granted('ROLE_ADMIN') %}
					<a href="{{ path('admin') }}" class="btn btn-sm btn-primary text-white d-none d-lg-inline-flex align-items-center px-2" style="font-size: 0.75rem;" aria-label="Accéder au tableau de bord administration">
						<i class="fas fa-cog me-1" aria-hidden="true"></i>
						<span>Admin</span>
					</a>
				{% endif %}

				{# Profil / Login #}
				{% if app.user %}
					<a href="{{ path('app_profile') }}" class="text-dark text-decoration-none p-1" aria-label="Accéder à mon compte">
						<i class="fas fa-user-circle fa-lg" aria-hidden="true"></i>
					</a>
					<a href="{{ path('app_logout') }}" class="btn btn-sm btn-outline-danger d-flex align-items-center" aria-label="Se déconnecter de mon compte" style="padding: 0.25rem 0.5rem;">
						<i class="fas fa-power-off" aria-hidden="true"></i>
						<span class="d-none d-md-inline ms-1" style="font-size: 0.75rem;">Déconnexion</span>
					</a>
				{% else %}
					<a href="{{ path('app_login') }}" class="text-dark text-decoration-none p-1" aria-label="Se connecter à mon compte">
						<i class="fas fa-sign-in-alt fa-lg" aria-hidden="true"></i>
					</a>
				{% endif %}

				{# Panier #}
				<a href="{{ path('cart_index') }}" class="position-relative text-dark text-decoration-none p-1" aria-label="Voir mon panier ({{ cart_count() }} articles)">
					<i class="fas fa-shopping-basket fa-lg" aria-hidden="true"></i>
					{% if cart_count() > 0 %}
						<span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary" style="font-size: 0.5rem; padding: 0.25em 0.4em;">
							{{ cart_count() }}
							<span class="visually-hidden">articles dans le panier</span>
						</span>
					{% endif %}
				</a>
			</div>
		</div>
	</nav>
</header>
